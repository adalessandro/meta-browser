From 8e25fb4a773d767392650da06ad5b5dafceff996 Mon Sep 17 00:00:00 2001
From: Alexandros Frantzis <alexandros.frantzis@collabora.com>
Date: Mon, 7 Oct 2024 10:46:20 +0300
Subject: [PATCH 09/14] blink/renderer: Allow VBR mode on CBR-only encoders for
 webcodecs on Linux

---
 third_party/blink/renderer/modules/webcodecs/video_encoder.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/third_party/blink/renderer/modules/webcodecs/video_encoder.cc b/third_party/blink/renderer/modules/webcodecs/video_encoder.cc
index 7cd36503d5..bd3c0d084c 100644
--- a/third_party/blink/renderer/modules/webcodecs/video_encoder.cc
+++ b/third_party/blink/renderer/modules/webcodecs/video_encoder.cc
@@ -173,7 +173,7 @@ media::VideoEncodeAccelerator::SupportedRateControlMode BitrateToSupportedMode(
       return media::VideoEncodeAccelerator::kConstantMode;
     case media::Bitrate::Mode::kVariable:
       return media::VideoEncodeAccelerator::kVariableMode
-#if BUILDFLAG(IS_ANDROID) || BUILDFLAG(IS_CHROMEOS)
+#if BUILDFLAG(IS_ANDROID) || BUILDFLAG(IS_CHROMEOS) || BUILDFLAG(IS_LINUX)
              // On Android and ChromeOS we allow CBR-only encoders to be used
              // for VBR because most devices don't properly advertise support
              // for VBR encoding. In most cases they will initialize
-- 
2.45.2

